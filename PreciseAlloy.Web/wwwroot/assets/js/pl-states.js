let E=1e5;const g=[{value:"theme-blue-p",name:"Blue"},{value:"theme-white-p",name:"White"},{value:"theme-sand-s",name:"Sand"},{value:"theme-flow-25",name:"Flow 25"},{value:"theme-wave-ac",name:"Wave"},{value:"theme-wave-50",name:"Wave 50"},{value:"theme-pearl-s",name:"Pearl"},{value:"theme-pebble-s",name:"Pebble"}],_=()=>"pl-state-id-"+E++,S=(s,c)=>{var m;if(!s.options)return"";const o=s.options,r=_(),e=s.multiple?"Select many...":((m=o.find(t=>c.contains(t.value)))==null?void 0:m.name)??"---",i=s.multiple?"checkbox":"radio";let u="";return o.forEach(t=>{const l=c.contains(t.value)?"checked":"",a=_();u+=`<input name="${r}" class="pl-state-bar__input" type="${i}" id="${a}" data-name="${t.name}" value="${t.value}" ${l}/><label class="pl-state-bar__label" for="${a}"><span>${t.name}</span></label>`}),`<div class="pl-state-bar__group"><div>${s.name}:</div><div class="pl-state-bar__group-header">${e}</div><div class="pl-state-bar__checkbox-group">${u}</div></div>`},y=()=>{[...document.querySelectorAll(".pl-state__button")].forEach(c=>c.classList.remove("active"))},f=s=>{s.classList.remove("expand"),document.body.classList.remove("pl-state-expand"),y(),window.dispatchEvent(new Event("resize"))},w=(s,c,o)=>{y();const r=document.querySelector(".pl-state-bar");if(!r)return;if(c.classList.contains("active")){f(r);return}const e=r.querySelector(".pl-state-bar__content");if(e){let i="",u=0;o.states.forEach(t=>{const l=t.name==="Theme"&&!t.options?{...t,options:g}:t;i+=S(l,s.classList),u++,u==1&&(i+=L())}),e.innerHTML=i;const p=e.querySelector(".pl-state-bar__close-button");p&&p.addEventListener("click",()=>f(r)),[...e.querySelectorAll(".pl-state-bar__group")].forEach(t=>{const l=t.querySelector(".pl-state-bar__group-header"),a=t.querySelector(".pl-state-bar__checkbox-group");if(!l||!a)return;l&&(l.addEventListener("click",()=>{a.classList.toggle("expand")}),document.addEventListener("click",n=>{if(!n.target)return;const d=n.target;!a.contains(d)&&!l.contains(d)&&a.classList.remove("expand")}));const b=t.querySelectorAll("input[type='checkbox']");[].forEach.call(b,n=>{n.addEventListener("change",()=>{n.value&&(n.checked?s.classList.add(n.value):s.classList.remove(n.value),window.dispatchEvent(new Event("resize")))})});const v=t.querySelectorAll("input[type='radio']");[].forEach.call(v,n=>{n.addEventListener("change",()=>{[].forEach.call(v,d=>{d.value&&s.classList.remove(d.value)}),n.value&&s.classList.add(n.value),l.textContent=n.getAttribute("data-name"),a.classList.remove("expand")})}),[...t.querySelectorAll("input[type='radio'] + label")].forEach(n=>{n.addEventListener("click",()=>{a.classList.remove("expand")})})}),r.classList.add("expand"),c.classList.add("active"),document.body.classList.add("pl-state-expand"),window.dispatchEvent(new Event("resize"))}},L=()=>'<div class="pl-state-bar__buttons"><a class="pl-state-bar__close-button"></a></div>',B=s=>{const c=`<div class="pl-state-bar"><div class="pl-state-bar__content"></div>${L()}</div>`;document.body.insertAdjacentHTML("beforeend",c);const o=document.querySelector(".pl-state-bar");if(!o)return;const r=o.querySelector(".pl-state-bar__close-button");r&&r.addEventListener("click",()=>f(o)),[].forEach.call(s,e=>{var t,l;if(!e||!e.selector)return;const i=((t=e.button)==null?void 0:t.styleModifier)??"",u=e.name?`title="Show state modifier for: ${e.name}"`:"",p=(l=e.button)!=null&&l.zIndex?`style="z-index: ${e.button.zIndex};"`:"",m=document.querySelectorAll(e.selector);[].forEach.call(m,a=>{var d;const b=`<div class="pl-state ${i}" ${p}><div class="pl-state__controls"><button class="pl-state__button" ${u}><img src="/pl-states.svg" loading="async"></button></div></div>`,v=(d=e.button)!=null&&d.parentSelector?a.querySelector(e.button.parentSelector):a;if(!v)return;v.insertAdjacentHTML("beforeend",b);const h=v.querySelector(":scope > .pl-state");if(!h)return;const n=h.querySelector(".pl-state__button");n&&n.addEventListener("click",()=>{w(a,n,e)})})}),addEventListener("resize",function(){const e=document.querySelector(".pl-state-bar");if(!e)return;const i=e.getBoundingClientRect();document.documentElement.style.setProperty("--pl-state-bar-height",Math.ceil(i.height)+"px")})},x=()=>{localStorage.getItem("pl-show-state-selector")&&fetch("/pl-states.json").then(o=>o.json()).then(o=>B(o))};x();
//# sourceMappingURL=pl-states.js.map
